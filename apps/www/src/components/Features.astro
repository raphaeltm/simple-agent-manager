---
const features = [
  {
    icon: 'agents',
    title: 'Multi-Agent Orchestration',
    description: 'Assign tasks to Claude Code, OpenAI Codex, or Gemini CLI — running in parallel across workspaces. Agents decompose work into subtasks and delegate to other agents. Bring your own API keys, stored encrypted.',
  },
  {
    icon: 'eye',
    title: 'Structured Visibility',
    description: 'Watch agents work in real time through the Agent Client Protocol. Tool calls, file diffs, permission requests, thinking blocks, and task progress — structured and readable, not raw terminal output.',
  },
  {
    icon: 'shield',
    title: 'Bring Your Own Cloud',
    description: 'Your code runs on your VMs. Hetzner tokens encrypted per-user, never stored as platform secrets. You control costs, regions, and data residency.',
  },
  {
    icon: 'project',
    title: 'Project-Centric Workflows',
    description: 'Organize tasks, milestones, and workspaces by project. Persistent chat sessions, activity feeds, and cross-agent monitoring — all tied to your GitHub repos.',
  },
  {
    icon: 'layers',
    title: 'Node Consolidation',
    description: 'Run multiple isolated workspaces on a single VM. Each gets its own devcontainer, agent sessions, and lifecycle — sharing infrastructure costs.',
  },
  {
    icon: 'code',
    title: 'Open Source & Self-Hostable',
    description: 'MIT licensed. Self-host the control plane on Cloudflare\'s free tier. No vendor lock-in to any cloud provider or AI model.',
  },
];

const iconPaths: Record<string, string[]> = {
  agents: [
    'M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2',
    'M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z',
    'M22 21v-2a4 4 0 0 0-3-3.87',
    'M16 3.13a4 4 0 0 1 0 7.75',
  ],
  eye: [
    'M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z',
    'M12 9a3 3 0 1 0 0 6 3 3 0 0 0 0-6z',
  ],
  shield: [
    'M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z',
  ],
  project: [
    'M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z',
  ],
  layers: [
    'M12 2L2 7l10 5 10-5-10-5z',
    'M2 17l10 5 10-5',
    'M2 12l10 5 10-5',
  ],
  code: [
    'M16 18l6-6-6-6',
    'M8 6l-6 6 6 6',
  ],
};
---

<section id="features" class="section">
  <div class="container">
    <div class="features-header animate-on-scroll">
      <span class="section-label">Features</span>
      <h2 class="section-title">Agent orchestration infrastructure<br />that you control</h2>
      <p class="section-subtitle">
        Purpose-built for delegating work to AI coding agents on your own cloud. Multi-agent, multi-workspace, fully observable.
      </p>
    </div>

    <div class="features-grid">
      {features.map((feature, i) => (
        <div class="feature-card animate-on-scroll" style={`transition-delay: ${i * 80}ms`}>
          <div class="feature-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              {iconPaths[feature.icon].map((d) => (
                <path d={d} />
              ))}
            </svg>
          </div>
          <h3 class="feature-title">{feature.title}</h3>
          <p class="feature-desc">{feature.description}</p>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .features-header {
    text-align: center;
    margin-bottom: 64px;
  }

  .features-header .section-subtitle {
    margin-left: auto;
    margin-right: auto;
  }

  .features-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 24px;
  }

  @media (min-width: 640px) {
    .features-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .features-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .feature-card {
    padding: 32px;
    background: var(--color-bg-surface);
    border: 1px solid var(--color-border-subtle);
    border-radius: var(--radius-lg);
    transition: border-color 0.3s, box-shadow 0.3s, opacity 0.6s ease, transform 0.6s ease;
  }

  .feature-card:hover {
    border-color: var(--color-border);
    box-shadow: 0 0 40px var(--color-accent-glow);
  }

  .feature-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    border-radius: var(--radius-md);
    background: var(--color-accent-glow);
    color: var(--color-accent);
    margin-bottom: 20px;
  }

  .feature-title {
    font-family: var(--font-display);
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--color-fg-primary);
    margin-bottom: 8px;
  }

  .feature-desc {
    font-size: 0.9375rem;
    color: var(--color-fg-muted);
    line-height: 1.6;
  }
</style>
